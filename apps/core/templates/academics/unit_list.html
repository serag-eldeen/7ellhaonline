{% extends "base.html" %}

{% block title %}
    Adventure Map - {{ grade.name }}
{% endblock %}

{% block extra_head %}
<style>
    /* Ø£Ù†Ù…Ø§Ø· Ø®Ø§ØµØ© Ø¨Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© */
    .adventure-path {
        position: relative;
        padding: 2rem 0;
    }
    .path-line {
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 8px;
        background-image: repeating-linear-gradient(45deg, #a0aec0, #a0aec0 10px, #cbd5e0 10px, #cbd5e0 20px);
        transform: translateX(-50%);
        z-index: -1;
    }
    .path-node {
        position: relative;
        margin-bottom: 3rem;
        display: flex;
        align-items: center;
    }
    /* Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù‚Ø¯ ØªØ¸Ù‡Ø± Ø¨Ø§Ù„ØªÙ†Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† ÙˆØ§Ù„ÙŠØ³Ø§Ø± */
    .path-node:nth-child(even) {
        flex-direction: row-reverse;
    }
    .node-content {
        width: calc(50% - 40px);
    }
    .node-connector {
        width: 80px;
        height: 8px;
        background-color: #a0aec0;
        border-radius: 4px;
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="text-center mb-12">
        <h1 class="text-5xl font-black bg-gradient-to-r from-blue-500 to-green-400 text-transparent bg-clip-text">Adventure Map</h1>
        <p class="text-xl text-gray-600 dark:text-gray-400 mt-2">Your learning journey in {{ grade.name }}!</p>
    </div>

    <div class="adventure-path">
        <div class="path-line"></div>

        {% for item in adventure_map_units %}
            <div class="path-node">
                <div class="node-content">
                    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-5">
                        <p class="text-sm font-bold 
                            {% if item.status == 'completed' %}text-green-500{% elif item.status == 'unlocked' %}text-blue-500{% else %}text-gray-500{% endif %}">
                            UNIT {{ item.unit.unit_number }}
                        </p>
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 mt-1">{{ item.unit.title }}</h2>
                        
                        <div class="mt-4">
                            {% if item.status == 'completed' %}
                                <a href="{% url 'quizzes:take_quiz' unit_id=item.unit.id %}" class="block w-full text-center px-4 py-2 bg-brand-yellow text-gray-800 font-bold rounded-lg hover:bg-opacity-90 transition">
                                    Review Quiz âœ…
                                </a>
                            {% elif item.status == 'unlocked' %}
                                <a href="{% url 'quizzes:take_quiz' unit_id=item.unit.id %}" class="block w-full text-center px-4 py-2 bg-brand-light-blue text-white font-bold rounded-lg hover:bg-opacity-90 transition">
                                    Start Challenge ðŸš€
                                </a>
                            {% else %}
                                <div class="w-full text-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 font-bold rounded-lg cursor-not-allowed">
                                    Locked ðŸ”’
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="node-connector"></div>
            </div>
        {% empty %}
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center">
                <p class="text-gray-500 dark:text-gray-400 text-lg">Your adventure will begin soon. Check back later!</p>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}